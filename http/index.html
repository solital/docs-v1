<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>HTTP Client - Solital Framework v1.0</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "HTTP Client";
    var mkdocs_page_input_path = "http.md";
    var mkdocs_page_url = "/http/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Solital Framework v1.0</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Welcome</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../starting/">Starting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../vinci/">Vinci Console</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../components/">Components</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../routes/">Routes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../requisitions/">Requisitions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../input.params/">Input & params</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../events/">Events</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../auth/">Authenticate</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../injection/">Dependency Container</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../cache/">Cache</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../security/">Security</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../folders-files/">Handling Folders and Files</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">HTTP Client</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#http-client">HTTP CLient</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#requirements">Requirements</a></li>
        
            <li><a class="toctree-l3" href="#basic-use">Basic use</a></li>
        
            <li><a class="toctree-l3" href="#supported-methods">Supported methods</a></li>
        
            <li><a class="toctree-l3" href="#return-types">Return types</a></li>
        
            <li><a class="toctree-l3" href="#sending-data">Sending data</a></li>
        
            <li><a class="toctree-l3" href="#custom-headers">Custom Headers</a></li>
        
            <li><a class="toctree-l3" href="#enabling-ssl-verification">Enabling SSL verification</a></li>
        
            <li><a class="toctree-l3" href="#authentication">Authentication</a></li>
        
            <li><a class="toctree-l3" href="#securing-routes">Securing routes</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../katrina/">Katrina ORM</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Solital Framework v1.0</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>HTTP Client</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/solital/docs-v1/tree/gh-pages/edit/master/docs/http.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="http-client">HTTP CLient</h1>
<p>Solital has a component to manipulate the HTTP client, useful for consuming API and making HTTP requests.</p>
<p>Before, you will need to install the component using the command below:</p>
<pre><code>composer install solital/http-client
</code></pre>

<h2 id="requirements">Requirements</h2>
<ul>
<li>PHP &gt;= 7.2</li>
<li>CURL extension enabled</li>
</ul>
<h2 id="basic-use">Basic use</h2>
<p>To make basic use of the component, you will need to instantiate the <code>HttpClient</code> class. Then, call the <code>request</code> function, passing the method (GET, POST, ...) and the url as a parameter. Then return the data.</p>
<pre><code class="php">use Solital\HttpClient;

$client = new HttpClient();
$client-&gt;request(&quot;GET&quot;, &quot;http://api.url.com&quot;);
$client-&gt;toJson();

pre($res);
</code></pre>

<h2 id="supported-methods">Supported methods</h2>
<p>HttpClient supports the methods below.</p>
<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>DELETE</li>
<li>PATCH</li>
<li>OPTIONS</li>
</ul>
<h2 id="return-types">Return types</h2>
<p>You can return the answer in json, array or object. The methods below show an example.</p>
<pre><code class="php">$client = new HttpClient();
$client-&gt;request(&quot;GET&quot;, &quot;http://api.url.com&quot;);

/** Return json */
$client-&gt;toJson();

/** Return array */
$client-&gt;toArray();

/** Return object */
$client-&gt;toObject();

pre($res);
</code></pre>

<h2 id="sending-data">Sending data</h2>
<p>If you are using a POST or PUT request, for example, and need to send data to the HTTP header, you can pass an array with the values in the <code>request</code> method.</p>
<pre><code class="php">$client = new HttpClient();

$res = $client-&gt;request(&quot;PUT&quot;, &quot;http://api.url.com&quot;, [
    'data' =&gt; 'your_data_values'
])-&gt;toJson();

echo $res;
</code></pre>

<h2 id="custom-headers">Custom Headers</h2>
<p>By default, HttpClient has the following headers:</p>
<ul>
<li>Content-Type: application/json</li>
<li>Accept: application/json</li>
</ul>
<p>To add other headers to the request, use an array in the constructor on the instance.</p>
<pre><code class="php">$headers = [
    'Content-Type: application/pdf'
];

$client = new HttpClient($headers);
#...
</code></pre>

<h2 id="enabling-ssl-verification">Enabling SSL verification</h2>
<p>HttpClient by default does not perform SSL verification. To enable verification, use the <code>enableSSL</code> method.</p>
<pre><code class="php">$client = new HttpClient();
$client-&gt;enableSSL();
#...
</code></pre>

<h2 id="authentication">Authentication</h2>
<h3 id="basic-auth">Basic Auth</h3>
<p>To perform authentication on an API that requires basic authentication, you can use the second parameter to inform the user and password. It is necessary to inform an array containing the indexes <code>user</code> and<code>pass</code>.</p>
<pre><code class="php">$client = new HttpClient(null, [
    'user' =&gt; 'username',
    'pass' =&gt; '123'
]);

$client-&gt;request(&quot;GET&quot;, &quot;http://api.url.com&quot;);
$res = $client-&gt;toJson();

pre($res);
</code></pre>

<h2 id="securing-routes">Securing routes</h2>
<h3 id="with-basic-auth">With Basic Auth</h3>
<p>Basic authentication requires the username and password in the class constructor. If an index other than <code>user</code> and<code>pass</code> is informed, an exception will be thrown.</p>
<p>You can protect your routes through basic authentication as shown below.</p>
<pre><code class="php">use Solital\Http\Auth\HttpAuth;

$auth = new HttpAuth([
    'user' =&gt; 'username',
    'pass' =&gt; '123'
]);
$auth-&gt;basic();
</code></pre>

<h3 id="with-digest-auth">With Digest Auth</h3>
<p>In digest authentication, it is not necessary to inform anything in the constructor, just pass the allowed users with their respective passwords as a parameter in the <code>digest</code> method.</p>
<pre><code class="php">use Solital\Http\Auth\HttpAuth;

$auth = new HttpAuth();
# 'username' =&gt; 'password'
$auth-&gt;digest(['admin' =&gt; 'pass1', 'admin2' =&gt; 'pass2', ...]);
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../katrina/" class="btn btn-neutral float-right" title="Katrina ORM">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../folders-files/" class="btn btn-neutral" title="Handling Folders and Files"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/solital/docs-v1/tree/gh-pages" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../folders-files/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../katrina/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
